{
    "$schema": "https://vega.github.io/schema/vega-lite/v6.2.0.json",
    "title": {
        "text": "Top 5 Birth Origins of People Living in Australia",
        "anchor": "middle",
        "fontSize": 18,
        "fontWeight": "bold",
        "color": "#002855"
    },
    "width": "container",
    "height": "container",
    "autosize": { "type": "fit", "contains": "padding" },
    "data": {
        "url": "https://jowongx8.github.io/FIT3179/data/country_birth_top5.csv",
        "format": { "type": "csv" }
    },
    "params": [
        {
            "name": "countryFilter",
            "value": null,
            "bind": {
                "input": "select",
                "options": [
                    null,
                    "Southern Asia",
                    "Chinese Asia",
                    "Maritime South-East Asia",
                    "United Kingdom",
                    "New Zealand"
                ],
                "labels": ["All", "Southern Asia", "Chinese Asia", "Maritime SE Asia", "United Kingdom", "New Zealand"],
                "name": "Filter by Country or Region of Birth: "
            }
        }
    ],
    "transform": [
        {
            "filter": "countryFilter == null || datum.CountryOfBirth == countryFilter"
        },
        {
            "calculate": "datum.State == 'New South Wales' ? 'NSW' : datum.State == 'Victoria' ? 'VIC' : datum.State == 'Queensland' ? 'QLD' : datum.State == 'Western Australia' ? 'WA' : datum.State == 'South Australia' ? 'SA' : datum.State == 'Tasmania' ? 'TAS' : datum.State == 'Northern Territory' ? 'NT' : datum.State == 'Australian Capital Territory' ? 'ACT' : datum.State",
            "as": "StateAbbrev"
        }
    ],
    "mark": { "type": "bar", "orient": "vertical" },
    "encoding": {
        "x": {
            "field": "StateAbbrev",
            "type": "nominal",
            "title": "State",
            "sort": ["NSW", "VIC", "QLD", "WA", "SA", "TAS", "NT", "ACT"],
            "axis": { "labelColor": "black", "titleColor": "black", "labelAngle": 0 }
        },
        "y": {
            "field": "Count",
            "type": "quantitative",
            "title": "Number of Residents",
            "axis": { "labelColor": "black", "titleColor": "black" }
        },
        "color": {
            "field": "CountryOfBirth",
            "type": "nominal",
            "title": "Country or Region of Birth",
            "scale": { "scheme": "set3" },
            "legend": {
                "orient": "bottom",
                "columns": 3,
                "title": "Country or Region of Birth",
                "symbolSize": 80
            }
        },
        "tooltip": [
            { "field": "State" },
            { "field": "CountryOfBirth", "title": "Country or Region" },
            { "field": "Count", "title": "Population", "format": "," }
        ]
    },
    "config": {
        "background": "#ffffff",
        "view": { "stroke": null },
        "axis": { "labelColor": "#333", "titleColor": "#003366" },
        "legend": { "labelFontSize": 12, "titleFontSize": 13 }
    }
}
